<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ucapan Wisuda â€” Mini Site</title>
  <meta name="description" content="Ucapan wisuda interaktif: landing, nama input, home dengan efek watercolor, bunga mekar, musik piano, dan galeri foto.">
  <style>
    :root{
      --pink:#ffb6c1; /* accent1 */
      --blue:#c3bafc; /* accent2 */
      --purple:#d8b4fe; /* accent3 */
      --card-bg: rgba(255,255,255,0.7);
      --muted:#6b5b95;
      --glass-shadow: 0 18px 50px rgba(142,112,255,0.12);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, Poppins, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background:radial-gradient(circle at 20% 20%, rgba(255,182,193,0.12), transparent 25%), radial-gradient(circle at 80% 80%, rgba(195,186,252,0.12), transparent 25%), #fbf8ff;display:flex;align-items:center;justify-content:center}

    /* app container */
    .wrap{width:94%;max-width:980px;min-height:640px;border-radius:22px;background:var(--card-bg);backdrop-filter:blur(10px);box-shadow:var(--glass-shadow);position:relative;overflow:hidden;padding:28px}

    /* header decoration */
    .top-left{position:absolute;left:-120px;top:-80px;opacity:0.95}
    .top-right{position:absolute;right:-100px;top:-160px;opacity:0.9}

    /* two 'pages' handled by js */
    .page{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .45s ease, transform .45s ease}
    .hidden{opacity:0;transform:scale(.99);pointer-events:none}

    h1{margin:6px 0;font-size:40px;color:var(--purple);letter-spacing:0.2px}
    h2{margin:6px 0;font-size:20px;color:var(--blue)}
    p.lead{color:var(--muted);max-width:720px;text-align:center}

    /* input box */
    .name-box{margin-top:18px;display:flex;gap:10px;align-items:center}
    input.name{padding:12px 16px;border-radius:999px;border:1px solid rgba(107,61,142,0.08);min-width:260px;font-size:16px}
    button.enter{padding:12px 18px;border-radius:999px;background:linear-gradient(90deg,var(--pink),var(--blue));border:none;color:white;font-weight:600;cursor:pointer}

    /* home layout */
    .home-inner{display:grid;grid-template-columns:1fr 380px;gap:22px;align-items:center;width:100%;padding:18px}
    .card-message{padding:22px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.6),rgba(255,255,255,0.45));box-shadow:0 10px 30px rgba(120,90,220,0.06)}
    .poetic{font-size:20px;color:#553c78;line-height:1.7}

    .right-panel{padding:18px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.55),rgba(255,255,255,0.5));min-height:320px;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .flower-scene{position:relative;width:100%;height:320px;border-radius:12px;overflow:hidden}

    /* watercolor blobs + SVG flowers */
    .blob{position:absolute;border-radius:50%;filter:blur(18px);mix-blend-mode:multiply;opacity:0.85}
    .blob.pink{background:var(--pink);width:240px;height:240px;left:-40px;top:10px}
    .blob.blue{background:var(--blue);width:200px;height:200px;right:-20px;top:40px}
    .blob.purple{background:var(--purple);width:180px;height:180px;left:60px;bottom:-40px}

    svg.flower{position:absolute;width:160px;height:160px;transform-origin:center bottom;bottom:20px;left:40px;opacity:0.95;filter:drop-shadow(0 8px 20px rgba(120,90,220,0.08))}
    svg.flower.f2{left:auto;right:36px;bottom:18px;width:140px;height:140px}
    svg.flower.f3{left:110px;bottom:60px;width:120px;height:120px}

    /* bloom animation */
    .bloom{transform:scale(0.8);opacity:0.85;transition:transform .9s cubic-bezier(.2,.9,.3,1), opacity .7s}
    .bloom.show{transform:scale(1);opacity:1}

    .controls{display:flex;gap:12px;margin-top:16px}
    button.ctrl{padding:10px 14px;border-radius:999px;border:none;cursor:pointer}
    .play{background:linear-gradient(90deg,var(--pink),var(--blue));color:#fff}
    .photos{background:#fff;border:1px solid rgba(107,61,142,0.08);color:#6b3d8e}

    /* modal photo */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(18,12,30,0.5);opacity:0;pointer-events:none;transition:opacity .25s}
    .modal.show{opacity:1;pointer-events:auto}
    .modal .box{width:92%;max-width:720px;background:linear-gradient(180deg,#fff,#fdf8ff);padding:18px;border-radius:12px;box-shadow:0 20px 60px rgba(12,8,40,0.35);text-align:center}
    .modal img{max-width:100%;border-radius:8px}
    .close{margin-top:12px;padding:8px 12px;border-radius:10px;background:#fff;border:1px solid rgba(107,61,142,0.06);cursor:pointer}

    footer{position:absolute;left:18px;bottom:12px;font-size:12px;color:#725f88}

    @media (max-width:900px){.home-inner{grid-template-columns:1fr;}.right-panel{order:-1}}
  </style>
</head>
<body>
  <div class="wrap" id="app">
    <!-- decorative blobs -->
    <div class="top-left">
      <svg width="280" height="280" viewBox="0 0 280 280"><defs></defs><ellipse cx="120" cy="120" rx="120" ry="90" fill="rgba(255,182,193,0.12)"/></svg>
    </div>
    <div class="top-right">
      <svg width="300" height="300" viewBox="0 0 300 300"><ellipse cx="180" cy="180" rx="120" ry="80" fill="rgba(195,186,252,0.12)"/></svg>
    </div>

    <!-- PAGE: Landing -->
    <div class="page" id="landing">
      <h1>Selamat Datang â€” Ucapan Wisuda</h1>
      <h2>Masukkan namamu untuk mulai</h2>
      <p class="lead">Buat ucapan personal dengan efek watercolor, bunga mekar, dan musik piano lembut. File ini bisa disimpan lalu dibuka offline.</p>
      <div class="name-box">
        <input class="name" id="inputName" placeholder="Masukkan nama..." maxlength="40">
        <button class="enter" id="enterBtn">Masuk</button>
      </div>
      <p style="margin-top:14px;color:var(--muted);font-size:13px">Atau buka langsung dengan parameter url: <code>?name=Namamu</code></p>
    </div>

    <!-- PAGE: Home -->
    <div class="page hidden" id="home">
      <div class="home-inner">
        <div class="card-message">
          <h1 id="homeTitle">ðŸŽ“ Selamat Wisuda!</h1>
          <h2 id="homeName">Atas Pencapaianmu</h2>
          <p class="poetic" id="poem">Di hari ini, kau adalah bukaan musimâ€”kelopak yang perlahan mekar, menumpahkan warna dan harap ke dunia. Langkahmu membuka jalan baru, ringkas namun penuh makna; biarkan setiap jejak menjadi taman yang kelak dikenang dengan senyum.</p>

          <div class="controls">
            <button class="ctrl play" id="playBtn">ðŸŽ¹ Putar Musik Piano (30s)</button>
            <button class="ctrl photos" id="photoBtn">ðŸ“¸ Lihat Foto</button>
          </div>

        </div>

        <div class="right-panel">
          <div class="flower-scene">
            <div class="blob pink"></div>
            <div class="blob blue"></div>
            <div class="blob purple"></div>

            <!-- SVG Flowers (3) -->
            <svg class="flower f1 bloom" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <g fill="none" stroke="rgba(0,0,0,0.04)" stroke-width="0">
                <ellipse cx="60" cy="70" rx="40" ry="30" fill="rgba(255,182,193,0.95)"/>
                <ellipse cx="60" cy="70" rx="28" ry="22" fill="rgba(255,226,240,0.95)"/>
                <circle cx="60" cy="60" r="8" fill="#ffd166"/>
              </g>
            </svg>

            <svg class="flower f2 bloom" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <g>
                <ellipse cx="60" cy="62" rx="36" ry="28" fill="rgba(195,186,252,0.95)"/>
                <ellipse cx="60" cy="62" rx="22" ry="16" fill="rgba(235,235,255,0.95)"/>
                <circle cx="60" cy="54" r="7" fill="#ffd166"/>
              </g>
            </svg>

            <svg class="flower f3 bloom" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <g>
                <ellipse cx="60" cy="66" rx="32" ry="24" fill="rgba(216,180,254,0.95)"/>
                <ellipse cx="60" cy="66" rx="20" ry="14" fill="rgba(255,245,250,0.95)"/>
                <circle cx="60" cy="56" r="6" fill="#ffd166"/>
              </g>
            </svg>

          </div>
        </div>
      </div>

      <footer>Tip: Tekan "Simpan sebagai..." untuk mengirim file HTML ke teman â€” mereka bisa buka di HP & tekan Putar Musik.</footer>
    </div>

    <!-- Photo Modal -->
    <div class="modal" id="modal">
      <div class="box">
        <h3>Foto Wisuda</h3>
        <p style="color:var(--muted);font-size:13px">Klik "Ganti Foto" untuk upload foto dari perangkat (opsional). Jika tidak, placeholder akan ditampilkan.</p>
        <div style="margin-top:12px">
          <img id="photoImg" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='500'><rect width='100%' height='100%' fill='%23fff7fb'/><text x='50%' y='48%' dominant-baseline='middle' text-anchor='middle' fill='%23725f88' font-size='26'>Foto Wisuda Placeholder</text><text x='50%' y='58%' dominant-baseline='middle' text-anchor='middle' fill='%23999' font-size='14'>Ganti dengan upload foto Anda</text></svg>" alt="foto"/>
        </div>
        <div style="margin-top:14px;display:flex;gap:10px;justify-content:center;align-items:center">
          <label style="background:linear-gradient(90deg,var(--pink),var(--blue));color:#fff;padding:8px 12px;border-radius:10px;cursor:pointer;">
            Ganti Foto<input type="file" id="fileInput" accept="image/*" style="display:none">
          </label>
          <button class="close" id="closeModal">Tutup</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Simple SPA behavior
    const landing = document.getElementById('landing');
    const home = document.getElementById('home');
    const input = document.getElementById('inputName');
    const enterBtn = document.getElementById('enterBtn');
    const homeName = document.getElementById('homeName');
    const homeTitle = document.getElementById('homeTitle');
    const poem = document.getElementById('poem');

    // set default poetic message (already set in HTML)

    function showHome(name){
      landing.classList.add('hidden');
      home.classList.remove('hidden');
      // set name in title
      homeName.textContent = name ? `Selamat Wisuda, ${name}!` : 'Selamat Wisuda!';
      // animate blooms
      document.querySelectorAll('.bloom').forEach((el,i)=>{setTimeout(()=>el.classList.add('show'), 250 + i*180)});
    }

    enterBtn.addEventListener('click', ()=>{
      const name = input.value.trim();
      if(!name) return showHome('Teman');
      showHome(name);
    });

    // also support ?name= param
    (function(){const u=new URL(window.location.href);const n=u.searchParams.get('name');if(n){input.value = decodeURIComponent(n);showHome(decodeURIComponent(n));}})();

    // ---- WebAudio piano synth (30s) ----
    const playBtn = document.getElementById('playBtn');
    let started=false;
    playBtn.addEventListener('click', async ()=>{
      if(started) return;
      started=true;playBtn.textContent='ðŸŽµ Musik Diputar';playBtn.disabled=true;playBtn.style.opacity=0.8;
      try{await startPiano();}catch(e){console.error(e);}
    });

    async function startPiano(){
      const ctx = new (window.AudioContext||window.webkitAudioContext)();
      function createReverb(seconds){
        const len = ctx.sampleRate*seconds; const buf = ctx.createBuffer(2,len,ctx.sampleRate);
        for(let c=0;c<2;c++){const data=buf.getChannelData(c);for(let i=0;i<len;i++){data[i]=(Math.random()*2-1)*Math.pow(1 - i/len,2.2);}}
        return buf;
      }
      const convolver = ctx.createConvolver(); convolver.buffer = createReverb(1.2);
      const master = ctx.createGain(); master.gain.value = 0.95; master.connect(ctx.destination);
      const reverbGain = ctx.createGain(); reverbGain.gain.value = 0.18; reverbGain.connect(convolver); convolver.connect(ctx.destination);

      const notes=[329.63,261.63,392.00,329.63,392.00,329.63,523.25,392.00,440.00,329.63,261.63,329.63,392.00,493.88,440.00,392.00];
      const baseDur = 0.75; const startTime = ctx.currentTime + 0.1; let t = startTime;
      for(let i=0;i<notes.length;i++){scheduleNote(ctx,notes[i],t,baseDur*(1+(i%3)*0.15),master,convolver,reverbGain);t+=baseDur*(1+(i%3)*0.15)*0.9}
      const phraseLen = t - startTime; const repeats = Math.ceil(30/phraseLen);
      for(let r=1;r<repeats;r++){for(let i=0;i<notes.length;i++){const nt = startTime + r*phraseLen + i*baseDur*(0.9+(i%3)*0.05);scheduleNote(ctx,notes[i],nt,baseDur*(1+(i%3)*0.15),master,convolver,reverbGain)}}
      setTimeout(()=>{try{ctx.close();}catch(e){}},35000);
    }
    function scheduleNote(ctx,frequency,when,duration,master,convolver,reverbGain){
      const osc1 = ctx.createOscillator(); osc1.type='sine'; osc1.frequency.setValueAtTime(frequency,when);
      const osc2 = ctx.createOscillator(); osc2.type='sine'; osc2.frequency.setValueAtTime(frequency*1.0035,when);
      const gainNode = ctx.createGain(); gainNode.gain.setValueAtTime(0.0001,when);
      const a=0.005,d=0.45,s=0.2,r=Math.max(0.5,duration*0.5);
      gainNode.gain.linearRampToValueAtTime(1.0,when+a);gainNode.gain.linearRampToValueAtTime(s,when+a+d);gainNode.gain.setValueAtTime(s,when+duration);gainNode.gain.linearRampToValueAtTime(0.0001,when+duration+r);
      const filter = ctx.createBiquadFilter(); filter.type='lowpass'; filter.frequency.setValueAtTime(4200,when);
      osc1.connect(gainNode); osc2.connect(gainNode); gainNode.connect(filter);
      const dryGain = ctx.createGain(); dryGain.gain.value = 0.9; const wetGain = ctx.createGain(); wetGain.gain.value = 0.18;
      filter.connect(dryGain); filter.connect(wetGain); dryGain.connect(master); wetGain.connect(reverbGain);
      osc1.start(when); osc2.start(when); const stopTime = when + duration + Math.max(0.6,duration*0.6) + 0.2; osc1.stop(stopTime); osc2.stop(stopTime);
      setTimeout(()=>{try{osc1.disconnect();osc2.disconnect();gainNode.disconnect();filter.disconnect();dryGain.disconnect();wetGain.disconnect();}catch(e){}},(stopTime - ctx.currentTime + 1)*1000);
    }

    // Photo modal logic
    const modal = document.getElementById('modal');
    const photoBtn = document.getElementById('photoBtn');
    const closeModal = document.getElementById('closeModal');
    const photoImg = document.getElementById('photoImg');
    const fileInput = document.getElementById('fileInput');

    photoBtn.addEventListener('click', ()=>{modal.classList.add('show')});
    closeModal.addEventListener('click', ()=>{modal.classList.remove('show')});
    fileInput.addEventListener('change', (e)=>{
      const f = e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ev=>{photoImg.src = ev.target.result}; reader.readAsDataURL(f);
    });

    // Save as HTML instruction (user can Save Page As)
    // Optionally auto-download: create blob and trigger download
    // We'll add helper: Ctrl+S or right click -> Save as HTML recommended

  </script>
</body>
</html>
